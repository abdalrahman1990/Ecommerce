"use strict";var _token=$("meta[name=csrf-token]").attr("content");function autoWidthDropDown(){var t=document.querySelectorAll(".no-constrain");M.Dropdown.init(t,{constrainWidth:!1})}function carousalSlider(){if(document.querySelector(".carousel")){var t=document.querySelector(".carousel");M.Carousel.init(t,{indicators:!0,fullWidth:!0});var e=M.Carousel.getInstance(t);setInterval(function(){e.next(1)},3500)}}function stickyNavbar(){if($("#navbar").get(0)){var a=window.pageYOffset;window.onscroll=function(){var t=$("#navbar").get(0),e=window.pageYOffset;t.style.top=e<a?"0":"-65px",a=e}}}function mobileSearch(){var e=$("#mobile-search"),t=$(".close-icon-mb");$("#search-close-mb").click(function(t){t.preventDefault(),$("#search-results-mb").hide(),e.val("")}),searchFocusBlur(e,t),search(e,$("#search-results-mb").get(0),searchResult),submitSearch($("#search-icon-mb"),$("#search-form-mb"),e)}function navSearch(){var e=$("#search"),t=$(".close-icon");$("#search-close").click(function(t){t.preventDefault(),$("#search-results").hide(),e.val("")}),searchFocusBlur(e,t),search(e,$("#search-results").get(0),searchResult),submitSearch($("#search-icon"),$("#search-form"),e)}function submitSearch(t,e,a){t.click(function(t){t.preventDefault(),""!=a.val()&&e.submit()})}function searchFocusBlur(t,e){t.focus(function(){e.addClass("grey-text"),e.removeClass("transparent-text"),e.css("opacity","1")}),t.blur(function(){e.css("opacity","0")})}function search(t,a,n){t.on("keyup input propertychange",function(){var e=$(this).val();e.length<=1?a.style.display="":makeAJAXRequest("/search/"+e,"GET",null,function(t){n(t,a,e)})})}function searchResult(t,e,a){if(0!=t.products.length){var n=t.products;for(var s in e.innerHTML="",e.style.display="block",n)e.innerHTML+='\n                <a href="/products/'.concat(n[s].slug,'" class="truncae grey-text text-darken-1 collection-item">\n                    ').concat(n[s].title,"\n                </a>");e.innerHTML+='\n            <a href="/search?search='+a+'" class="collection-item center">\n                Show all results\n            </a>\n        '}else e.innerHTML="",e.innerHTML='\n            <a href="#" class="collection-item grey-text text-darken-2">\n                Nothing found!\n            </a>\n        '}function addToCart(){$("body").delegate(".add-cart","click",function(t){var e=$(this).attr("data-id"),a=$("#qty :selected").text();a||(a=1);var n={_token:_token,_id:e,_qty:a};t.preventDefault(),makeAJAXRequest("/cart/add","POST",n,function(t){addCartSuccess(t)},function(t){422==t.status&&makeToast("Invalid product please refresh the page!")})})}function updateCart(){$("body").delegate(".update-cart","click",function(t){t.preventDefault();var e=$(this).attr("data-id"),a=$("#qty-"+e).val()||0,n=$("#rowId-"+e).val();makeAJAXRequest("/cart/update","POST",{_token:_token,_rowId:n,_qty:a},function(t){updateCartSuccess(t,e)},function(t){validationFailed(t.status,"Invalid product please refresh the page!")})})}function updateCartSuccess(t,e){$(".cart-subtotal").text("$"+t.subtotal+" /-"),$(".cart-tax").text("$"+t.tax+" /-"),$(".cart-total").text("$"+t.total+" /-");var a=t.cart_count;"delete"===t.type&&($("tr[data-id="+e+"]").addClass("animated fadeOut"),setTimeout(function(){$("tr[data-id="+e+"]").on("transitionend",function(t){$(this).remove()}),0===a&&($(".checkout-btn").addClass("disabled"),$(".cart-items").remove(),$(".cart-panel").html('<h5 class="animated fadeIn grey-text text-darken-2 center">Your cart is empty! <a href="/products"> Start Shopping</a></h5>'))},300)),makeToast(t.msg),updateCartTotal(a)}function addCartSuccess(t){makeToast("".concat(t.msg,'  <a href="/cart" class="btn-flat blue-text"> Cart</a>')),updateCartTotal(t.cart_count)}function updateCartTotal(t){$(".cart-count").text("(".concat(t,")"))}function addToWishlist(){$("body").delegate(".add-wishlist","click",function(t){t.preventDefault();var e=$(this).attr("data-id");makeAJAXRequest("/wishlist/add","POST",{_token:_token,_id:e},function(t){makeToast("".concat(t.message,' <a href="/wishlist" class="btn-flat blue-text">Wishlist</a>'))},function(t){401==t.status&&makeToast("Please Login or Register to use Wishlist"),validationFailed(t.status,"Invalid product please refresh the page!")})})}function validationFailed(t,e){422==t&&makeToast(e)}function makeAJAXRequest(t,e,a,n,s){$.ajax({method:e,dataType:"json",url:t,data:a,success:n,error:s})}function makeToast(t){M.toast({html:"<span>"+t+"</span><button class='btn-flat toast-action' onclick='dismissToast()'><i class='material-icons yellow-text'>close</i></button>",inDuration:500,outDuration:1e3})}function dismissToast(){var t=document.querySelector(".toast");M.Toast.getInstance(t).dismiss()}$(document).ready(function(){M.AutoInit(),stickyNavbar(),carousalSlider(),mobileSearch(),navSearch(),addToCart(),addToWishlist(),updateCart()});